[gd_scene load_steps=22 format=3 uid="uid://0ntwa17c8s3i"]

[ext_resource type="PackedScene" uid="uid://ckqgw4ydrms3u" path="res://resources/Characters/main_character/alna-Main_Character.blend" id="1_bi68h"]
[ext_resource type="Script" uid="uid://b010a71o28m72" path="res://resources/Characters/main_character/alna_main_character_skin.gd" id="2_q8n5d"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://dkgf2ivbhbmu0" path="res://resources/player/movement_state_machine.tres" id="3_lnvb7"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_lnvb7"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_egrqx"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_i655d"]
animation = &"Idle_Gun_Pointing"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_awd5o"]
animation = &"Punch_Left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hd263"]
animation = &"Punch_Right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_koahu"]
animation = &"Sword_Slash"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hd263"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bw5oq"]
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lnvb7"]
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_awd5o"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i655d"]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_lnvb7"]
states/Punch_Left/node = SubResource("AnimationNodeAnimation_awd5o")
states/Punch_Left/position = Vector2(356, 101)
states/Punch_Right/node = SubResource("AnimationNodeAnimation_hd263")
states/Punch_Right/position = Vector2(642, 194)
states/Start/position = Vector2(199, 100)
states/Sword_Slash/node = SubResource("AnimationNodeAnimation_koahu")
states/Sword_Slash/position = Vector2(356, 194)
transitions = ["Start", "Punch_Left", SubResource("AnimationNodeStateMachineTransition_hd263"), "Punch_Left", "Sword_Slash", SubResource("AnimationNodeStateMachineTransition_bw5oq"), "Sword_Slash", "Punch_Left", SubResource("AnimationNodeStateMachineTransition_lnvb7"), "Sword_Slash", "End", SubResource("AnimationNodeStateMachineTransition_awd5o"), "Punch_Left", "End", SubResource("AnimationNodeStateMachineTransition_i655d")]
graph_offset = Vector2(-5, -2)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lnvb7"]
animation = &"Sword_Slash"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_i655d"]
filter_enabled = true
filters = [".", "AttackTimer", "CharacterArmature/Skeleton3D:Abdomen", "CharacterArmature/Skeleton3D:Chest", "CharacterArmature/Skeleton3D:Head", "CharacterArmature/Skeleton3D:Index1.R", "CharacterArmature/Skeleton3D:Index2.L", "CharacterArmature/Skeleton3D:Index2.R", "CharacterArmature/Skeleton3D:Index3.L", "CharacterArmature/Skeleton3D:Index3.R", "CharacterArmature/Skeleton3D:Index4.L", "CharacterArmature/Skeleton3D:Index4.R", "CharacterArmature/Skeleton3D:LowerArm.L", "CharacterArmature/Skeleton3D:LowerArm.R", "CharacterArmature/Skeleton3D:Middle1.R", "CharacterArmature/Skeleton3D:Middle2.L", "CharacterArmature/Skeleton3D:Middle2.R", "CharacterArmature/Skeleton3D:Middle3.L", "CharacterArmature/Skeleton3D:Middle3.R", "CharacterArmature/Skeleton3D:Middle4.L", "CharacterArmature/Skeleton3D:Middle4.R", "CharacterArmature/Skeleton3D:Neck", "CharacterArmature/Skeleton3D:Pinky1.R", "CharacterArmature/Skeleton3D:Pinky2.L", "CharacterArmature/Skeleton3D:Pinky2.R", "CharacterArmature/Skeleton3D:Pinky3.L", "CharacterArmature/Skeleton3D:Pinky3.R", "CharacterArmature/Skeleton3D:Pinky4.L", "CharacterArmature/Skeleton3D:Pinky4.R", "CharacterArmature/Skeleton3D:Ring1.R", "CharacterArmature/Skeleton3D:Ring2.L", "CharacterArmature/Skeleton3D:Ring2.R", "CharacterArmature/Skeleton3D:Ring3.L", "CharacterArmature/Skeleton3D:Ring3.R", "CharacterArmature/Skeleton3D:Ring4.L", "CharacterArmature/Skeleton3D:Ring4.R", "CharacterArmature/Skeleton3D:Shoulder.L", "CharacterArmature/Skeleton3D:Shoulder.R", "CharacterArmature/Skeleton3D:Thumb1.L", "CharacterArmature/Skeleton3D:Thumb1.R", "CharacterArmature/Skeleton3D:Thumb2.L", "CharacterArmature/Skeleton3D:Thumb2.R", "CharacterArmature/Skeleton3D:Thumb3.L", "CharacterArmature/Skeleton3D:Thumb3.R", "CharacterArmature/Skeleton3D:Torso", "CharacterArmature/Skeleton3D:UpperArm.L", "CharacterArmature/Skeleton3D:UpperArm.R", "CharacterArmature/Skeleton3D:Wrist.L", "CharacterArmature/Skeleton3D:Wrist.R"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bw5oq"]
animation = &"Gun_Shoot"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_egrqx"]

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_lnvb7"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_lnvb7"]
graph_offset = Vector2(-426.45157, -175.13783)
nodes/output/position = Vector2(980, -220)
nodes/Movement-StateMachine/node = ExtResource("3_lnvb7")
nodes/Movement-StateMachine/position = Vector2(-200, -40)
nodes/AttackOneShot/node = SubResource("AnimationNodeOneShot_i655d")
nodes/AttackOneShot/position = Vector2(480, 20)
nodes/AttackAnimation/node = SubResource("AnimationNodeAnimation_lnvb7")
nodes/AttackAnimation/position = Vector2(460, 320)
nodes/AimBlend/node = SubResource("AnimationNodeBlend2_lnvb7")
nodes/AimBlend/position = Vector2(300, -40)
nodes/Animation/node = SubResource("AnimationNodeAnimation_i655d")
nodes/Animation/position = Vector2(-180, 280)
nodes/Attack-StateMachine/node = SubResource("AnimationNodeStateMachine_lnvb7")
nodes/Attack-StateMachine/position = Vector2(220, 220)
nodes/ExtraAnimation/node = SubResource("AnimationNodeAnimation_bw5oq")
nodes/ExtraAnimation/position = Vector2(620, -80)
nodes/ExtraOneShot/node = SubResource("AnimationNodeOneShot_egrqx")
nodes/ExtraOneShot/position = Vector2(820, 40)
nodes/UnarmedTransition/node = SubResource("AnimationNodeTransition_lnvb7")
nodes/UnarmedTransition/position = Vector2(420, -280)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_egrqx")
"nodes/Animation 2/position" = Vector2(160, -300)
node_connections = [&"output", 0, &"ExtraOneShot", &"AttackOneShot", 0, &"Movement-StateMachine", &"AttackOneShot", 1, &"Attack-StateMachine", &"AimBlend", 1, &"Animation", &"ExtraOneShot", 0, &"AttackOneShot", &"ExtraOneShot", 1, &"ExtraAnimation"]

[node name="alna-Main_Character" node_paths=PackedStringArray("animation_tree") instance=ExtResource("1_bi68h")]
script = ExtResource("2_q8n5d")
animation_tree = NodePath("AnimationTree")

[node name="Adventurer_Body" parent="CharacterArmature/Skeleton3D" index="1"]
visible = false

[node name="Adventurer_Feet" parent="CharacterArmature/Skeleton3D" index="2"]
visible = false

[node name="Adventurer_Head" parent="CharacterArmature/Skeleton3D" index="3"]
visible = false

[node name="Backpack" parent="CharacterArmature/Skeleton3D" index="4"]
visible = false

[node name="Cape" parent="CharacterArmature/Skeleton3D" index="5"]
visible = false

[node name="Farmer_Body" parent="CharacterArmature/Skeleton3D" index="6"]
visible = false

[node name="Farmer_Feet" parent="CharacterArmature/Skeleton3D" index="7"]
visible = false

[node name="Farmer_Head" parent="CharacterArmature/Skeleton3D" index="8"]
visible = false

[node name="Farmer_Pants" parent="CharacterArmature/Skeleton3D" index="9"]
visible = false

[node name="King_Feet" parent="CharacterArmature/Skeleton3D" index="12"]
visible = false

[node name="King_Head" parent="CharacterArmature/Skeleton3D" index="13"]
visible = false

[node name="King_Legs" parent="CharacterArmature/Skeleton3D" index="14"]
visible = false

[node name="Male_Peasant_Arms" parent="CharacterArmature/Skeleton3D" index="15"]
visible = false

[node name="Male_Peasant_Body" parent="CharacterArmature/Skeleton3D" index="16"]
visible = false

[node name="Peaked Cap" parent="CharacterArmature/Skeleton3D" index="19"]
visible = false

[node name="Pistol" parent="CharacterArmature/Skeleton3D" index="20"]
visible = false

[node name="Scabbard" parent="CharacterArmature/Skeleton3D" index="21"]
visible = false

[node name="Suit_Body" parent="CharacterArmature/Skeleton3D" index="22"]
visible = false

[node name="Swat_Body" parent="CharacterArmature/Skeleton3D" index="24"]
visible = false

[node name="Swat_Feet" parent="CharacterArmature/Skeleton3D" index="25"]
visible = false

[node name="Swat_Legs" parent="CharacterArmature/Skeleton3D" index="26"]
visible = false

[node name="HandSlot-Left" type="BoneAttachment3D" parent="CharacterArmature/Skeleton3D" index="28"]
transform = Transform3D(0.0048578028, 0.9955552, -0.09405492, -0.018919159, 0.094130896, 0.99538004, 0.9998088, -0.003055905, 0.019292343, 0.7193671, 1.4418554, 0.08976418)
bone_name = "Middle2.L"
bone_idx = 17

[node name="HandSlot-Right" type="BoneAttachment3D" parent="CharacterArmature/Skeleton3D" index="29"]
transform = Transform3D(0.004857762, -0.99555486, 0.09405537, 0.018919017, 0.09413116, 0.99538004, -0.99980855, -0.0030559297, 0.019292265, -0.71936667, 1.4418557, 0.089764185)
bone_name = "Middle2.R"
bone_idx = 40

[node name="PunchRaycast" type="RayCast3D" parent="CharacterArmature/Skeleton3D/HandSlot-Right" index="0"]
transform = Transform3D(0.99961865, 0.022347512, -0.016232528, -0.016236791, 9.301164e-06, -0.99986815, -0.022344416, 0.99975026, 0.0003721344, 0, 0, 0)
target_position = Vector3(0, 1, 0)
collision_mask = 7

[node name="AnimationPlayer" parent="." index="1"]
autoplay = "Idle"

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_lnvb7")
anim_player = NodePath("../AnimationPlayer")
parameters/AttackOneShot/active = false
parameters/AttackOneShot/internal_active = false
parameters/AttackOneShot/request = 0
parameters/AimBlend/blend_amount = 0.0
parameters/ExtraOneShot/active = false
parameters/ExtraOneShot/internal_active = false
parameters/ExtraOneShot/request = 0
parameters/UnarmedTransition/current_state = ""
parameters/UnarmedTransition/transition_request = ""
parameters/UnarmedTransition/current_index = -1

[node name="AttackTimer" type="Timer" parent="." index="3"]
wait_time = 0.5
one_shot = true
