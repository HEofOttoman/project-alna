[gd_scene load_steps=20 format=3 uid="uid://0ntwa17c8s3i"]

[ext_resource type="PackedScene" uid="uid://ckqgw4ydrms3u" path="res://resources/Characters/main_character/alna-Main_Character.blend" id="1_bi68h"]
[ext_resource type="Script" uid="uid://b010a71o28m72" path="res://resources/Characters/main_character/alna_main_character_skin.gd" id="2_q8n5d"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://dkgf2ivbhbmu0" path="res://resources/player/movement_state_machine.tres" id="3_lnvb7"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_lnvb7"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_i655d"]
animation = &"Idle_Gun_Pointing"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_awd5o"]
animation = &"Punch_Left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hd263"]
animation = &"Punch_Right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_koahu"]
animation = &"Sword_Slash"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hd263"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bw5oq"]
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lnvb7"]
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_awd5o"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i655d"]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_lnvb7"]
states/Punch_Left/node = SubResource("AnimationNodeAnimation_awd5o")
states/Punch_Left/position = Vector2(356, 101)
states/Punch_Right/node = SubResource("AnimationNodeAnimation_hd263")
states/Punch_Right/position = Vector2(642, 194)
states/Start/position = Vector2(199, 100)
states/Sword_Slash/node = SubResource("AnimationNodeAnimation_koahu")
states/Sword_Slash/position = Vector2(356, 194)
transitions = ["Start", "Punch_Left", SubResource("AnimationNodeStateMachineTransition_hd263"), "Punch_Left", "Sword_Slash", SubResource("AnimationNodeStateMachineTransition_bw5oq"), "Sword_Slash", "Punch_Left", SubResource("AnimationNodeStateMachineTransition_lnvb7"), "Sword_Slash", "End", SubResource("AnimationNodeStateMachineTransition_awd5o"), "Punch_Left", "End", SubResource("AnimationNodeStateMachineTransition_i655d")]
graph_offset = Vector2(-5, -2)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lnvb7"]
animation = &"Sword_Slash"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_i655d"]
filter_enabled = true
filters = [".", "AttackTimer", "CharacterArmature/Skeleton3D:Abdomen", "CharacterArmature/Skeleton3D:Chest", "CharacterArmature/Skeleton3D:Head", "CharacterArmature/Skeleton3D:Index1.R", "CharacterArmature/Skeleton3D:Index2.L", "CharacterArmature/Skeleton3D:Index2.R", "CharacterArmature/Skeleton3D:Index3.L", "CharacterArmature/Skeleton3D:Index3.R", "CharacterArmature/Skeleton3D:Index4.L", "CharacterArmature/Skeleton3D:Index4.R", "CharacterArmature/Skeleton3D:LowerArm.L", "CharacterArmature/Skeleton3D:LowerArm.R", "CharacterArmature/Skeleton3D:Middle1.R", "CharacterArmature/Skeleton3D:Middle2.L", "CharacterArmature/Skeleton3D:Middle2.R", "CharacterArmature/Skeleton3D:Middle3.L", "CharacterArmature/Skeleton3D:Middle3.R", "CharacterArmature/Skeleton3D:Middle4.L", "CharacterArmature/Skeleton3D:Middle4.R", "CharacterArmature/Skeleton3D:Neck", "CharacterArmature/Skeleton3D:Pinky1.R", "CharacterArmature/Skeleton3D:Pinky2.L", "CharacterArmature/Skeleton3D:Pinky2.R", "CharacterArmature/Skeleton3D:Pinky3.L", "CharacterArmature/Skeleton3D:Pinky3.R", "CharacterArmature/Skeleton3D:Pinky4.L", "CharacterArmature/Skeleton3D:Pinky4.R", "CharacterArmature/Skeleton3D:Ring1.R", "CharacterArmature/Skeleton3D:Ring2.L", "CharacterArmature/Skeleton3D:Ring2.R", "CharacterArmature/Skeleton3D:Ring3.L", "CharacterArmature/Skeleton3D:Ring3.R", "CharacterArmature/Skeleton3D:Ring4.L", "CharacterArmature/Skeleton3D:Ring4.R", "CharacterArmature/Skeleton3D:Shoulder.L", "CharacterArmature/Skeleton3D:Shoulder.R", "CharacterArmature/Skeleton3D:Thumb1.L", "CharacterArmature/Skeleton3D:Thumb1.R", "CharacterArmature/Skeleton3D:Thumb2.L", "CharacterArmature/Skeleton3D:Thumb2.R", "CharacterArmature/Skeleton3D:Thumb3.L", "CharacterArmature/Skeleton3D:Thumb3.R", "CharacterArmature/Skeleton3D:Torso", "CharacterArmature/Skeleton3D:UpperArm.L", "CharacterArmature/Skeleton3D:UpperArm.R", "CharacterArmature/Skeleton3D:Wrist.L", "CharacterArmature/Skeleton3D:Wrist.R"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bw5oq"]
animation = &"Gun_Shoot"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_egrqx"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_lnvb7"]
graph_offset = Vector2(-221.09293, 21.702469)
nodes/output/position = Vector2(1000, 40)
nodes/Movement-StateMachine/node = ExtResource("3_lnvb7")
nodes/Movement-StateMachine/position = Vector2(-200, -40)
nodes/AttackOneShot/node = SubResource("AnimationNodeOneShot_i655d")
nodes/AttackOneShot/position = Vector2(480, 20)
nodes/AttackAnimation/node = SubResource("AnimationNodeAnimation_lnvb7")
nodes/AttackAnimation/position = Vector2(460, 320)
nodes/AimBlend/node = SubResource("AnimationNodeBlend2_lnvb7")
nodes/AimBlend/position = Vector2(300, -40)
nodes/Animation/node = SubResource("AnimationNodeAnimation_i655d")
nodes/Animation/position = Vector2(-180, 280)
nodes/Attack-StateMachine/node = SubResource("AnimationNodeStateMachine_lnvb7")
nodes/Attack-StateMachine/position = Vector2(220, 220)
nodes/ExtraAnimation/node = SubResource("AnimationNodeAnimation_bw5oq")
nodes/ExtraAnimation/position = Vector2(620, -80)
nodes/ExtraOneShot/node = SubResource("AnimationNodeOneShot_egrqx")
nodes/ExtraOneShot/position = Vector2(820, 40)
node_connections = [&"output", 0, &"ExtraOneShot", &"AttackOneShot", 0, &"Movement-StateMachine", &"AttackOneShot", 1, &"Attack-StateMachine", &"AimBlend", 1, &"Animation", &"ExtraOneShot", 0, &"AttackOneShot", &"ExtraOneShot", 1, &"ExtraAnimation"]

[node name="alna-Main_Character" instance=ExtResource("1_bi68h")]
script = ExtResource("2_q8n5d")

[node name="Skeleton3D" parent="CharacterArmature" index="0"]
bones/1/position = Vector3(0.00045321946, 0.8365891, -0.04560568)
bones/1/rotation = Quaternion(0, 0.2355304, 0, 0.971867)
bones/3/rotation = Quaternion(0.047781564, 4.0028598e-07, 2.5596659e-08, 0.9988578)
bones/4/rotation = Quaternion(0.11008152, 0.11437819, -0.015578493, 0.9871966)
bones/5/rotation = Quaternion(0.03347801, -0.075209945, 0.0066101397, 0.99658364)
bones/6/rotation = Quaternion(0.0026542363, -0.13255998, 0.03668173, 0.9904924)
bones/7/rotation = Quaternion(-0.034050133, -0.103218615, -0.026473626, 0.99372315)
bones/8/position = Vector3(0.09873544, 0.02901769, 0.0212757)
bones/8/rotation = Quaternion(0.45619938, 0.8402314, 0.106907204, -0.27288124)
bones/9/rotation = Quaternion(-0.6051777, 0.15698645, -0.10064732, 0.77394146)
bones/10/rotation = Quaternion(-0.14668414, -0.12059949, -0.85268855, 0.48668462)
bones/11/rotation = Quaternion(0.0016841086, 0.013185385, -0.030821195, 0.9994366)
bones/13/rotation = Quaternion(-0.7411933, -0.0916489, 0.045829676, 0.66342497)
bones/14/rotation = Quaternion(-0.62067693, 0.0074643753, -0.014044751, 0.7839051)
bones/15/rotation = Quaternion(-0.86792564, 0.06413344, -0.21631947, 0.4424906)
bones/17/rotation = Quaternion(-0.74697673, 0.029510377, -0.03344338, 0.6633525)
bones/18/rotation = Quaternion(-0.64134526, -0.036997143, -0.08013333, 0.76215893)
bones/19/rotation = Quaternion(-0.9233857, -0.04607295, -0.06391747, 0.37570047)
bones/21/rotation = Quaternion(-0.7297877, 0.13275746, -0.10216309, 0.6628334)
bones/22/rotation = Quaternion(-0.54041946, 0.0807198, -0.26405683, 0.7947988)
bones/23/rotation = Quaternion(-0.6946695, 0.00921613, -0.52125216, 0.49562642)
bones/25/rotation = Quaternion(-0.6339214, 0.24059202, -0.15567002, 0.71834946)
bones/26/rotation = Quaternion(-0.64784056, -0.112868555, -0.13430597, 0.7412997)
bones/27/rotation = Quaternion(-0.8742623, -0.042288914, 0.000567572, 0.4836081)
bones/28/rotation = Quaternion(-0.042371955, 0.4334038, -0.28357115, 0.8543731)
bones/29/rotation = Quaternion(0.1537315, 0.025931334, 0.07716775, 0.98475343)
bones/30/rotation = Quaternion(-0.370077, -0.09269914, 0.3752624, 0.844765)
bones/31/position = Vector3(-0.09805999, 0.029017646, 0.021275815)
bones/31/rotation = Quaternion(-0.45619926, 0.8402316, 0.106907494, 0.27288073)
bones/32/rotation = Quaternion(-0.5385655, -0.07003373, -0.4825494, 0.68715984)
bones/33/rotation = Quaternion(-0.35458964, 0.09206898, 0.66321516, 0.6526371)
bones/34/rotation = Quaternion(-0.009572383, -0.022346508, 0.07762128, 0.9966865)
bones/35/rotation = Quaternion(-0.008857802, -0.01421826, 0.09331991, 0.99549526)
bones/36/rotation = Quaternion(-0.7411932, 0.091648884, -0.04582975, 0.663425)
bones/37/rotation = Quaternion(-0.62067693, -0.007464381, 0.014044773, 0.7839051)
bones/38/rotation = Quaternion(-0.86792564, -0.06413346, 0.2163195, 0.4424906)
bones/39/rotation = Quaternion(0.025722718, 0.01940883, -0.016910488, 0.9993376)
bones/40/rotation = Quaternion(-0.7469768, -0.029510379, 0.033443358, 0.6633525)
bones/41/rotation = Quaternion(-0.64134526, 0.03699714, 0.08013336, 0.76215893)
bones/42/rotation = Quaternion(-0.9233857, 0.046072952, 0.06391746, 0.3757004)
bones/43/rotation = Quaternion(0.009113189, 0.05034087, -0.12795717, 0.99045944)
bones/44/rotation = Quaternion(-0.7297877, -0.13275748, 0.10216303, 0.6628334)
bones/45/rotation = Quaternion(-0.54041946, -0.08071987, 0.2640568, 0.7947988)
bones/46/rotation = Quaternion(-0.6946695, -0.00921607, 0.5212522, 0.49562636)
bones/47/rotation = Quaternion(0.017032538, 0.071919926, -0.22635873, 0.971236)
bones/48/rotation = Quaternion(-0.6339215, -0.24059194, 0.15567008, 0.7183494)
bones/49/rotation = Quaternion(-0.6478406, 0.11286853, 0.13430598, 0.7412997)
bones/50/rotation = Quaternion(-0.8742624, 0.042288914, -0.00056761253, 0.48360813)
bones/51/rotation = Quaternion(-0.042371962, -0.4334037, 0.28357106, 0.85437316)
bones/52/rotation = Quaternion(0.15373152, -0.025931336, -0.077167764, 0.98475343)
bones/53/rotation = Quaternion(-0.37007698, 0.092699125, -0.37526235, 0.8447651)
bones/54/rotation = Quaternion(0.5362322, -0.011972705, -0.83747125, 0.10466024)
bones/54/scale = Vector3(0.99999595, 0.99999964, 1.0000728)
bones/55/rotation = Quaternion(0.16405818, 0.6878119, -0.16405809, 0.6878115)
bones/56/rotation = Quaternion(0.55747354, 0.1136928, 0.8082104, 0.15196481)
bones/56/scale = Vector3(0.99999726, 0.9999996, 1.0000701)
bones/57/rotation = Quaternion(0.14163454, -0.692777, 0.14163442, 0.6927766)
bones/58/position = Vector3(0.12059154, 0.022751734, -0.18702765)
bones/58/rotation = Quaternion(0.61441374, 0.3480438, -0.34615317, 0.6176887)
bones/59/position = Vector3(0.5682192, 0.62651205, 0.22707659)
bones/60/position = Vector3(-0.06850713, 0.02275173, 0.17368552)
bones/60/rotation = Quaternion(0.70403296, 0.040968817, -0.040789712, 0.7078102)
bones/61/position = Vector3(-0.018165782, 0.42326432, 0.65894055)

[node name="UpperLeg_L" parent="CharacterArmature/Skeleton3D" index="0"]
transform = Transform3D(-0.7683238, 0.20500186, -0.606384, -0.18813941, -0.9778054, -0.09219749, -0.61177933, 0.043244198, 0.78990114, 0.11567718, 0.9353384, -0.011975773)

[node name="Adventurer_Body" parent="CharacterArmature/Skeleton3D" index="1"]
visible = false

[node name="Adventurer_Feet" parent="CharacterArmature/Skeleton3D" index="2"]
visible = false

[node name="Adventurer_Head" parent="CharacterArmature/Skeleton3D" index="3"]
visible = false

[node name="Backpack" parent="CharacterArmature/Skeleton3D" index="4"]
visible = false

[node name="Cape" parent="CharacterArmature/Skeleton3D" index="5"]
visible = false

[node name="Farmer_Body" parent="CharacterArmature/Skeleton3D" index="6"]
visible = false

[node name="Farmer_Feet" parent="CharacterArmature/Skeleton3D" index="7"]
visible = false

[node name="Farmer_Head" parent="CharacterArmature/Skeleton3D" index="8"]
visible = false

[node name="Farmer_Pants" parent="CharacterArmature/Skeleton3D" index="9"]
visible = false

[node name="King_Feet" parent="CharacterArmature/Skeleton3D" index="12"]
visible = false

[node name="King_Head" parent="CharacterArmature/Skeleton3D" index="13"]
visible = false

[node name="King_Legs" parent="CharacterArmature/Skeleton3D" index="14"]
visible = false

[node name="Male_Peasant_Arms" parent="CharacterArmature/Skeleton3D" index="15"]
visible = false

[node name="Male_Peasant_Body" parent="CharacterArmature/Skeleton3D" index="16"]
visible = false

[node name="Peaked Cap" parent="CharacterArmature/Skeleton3D" index="19"]
visible = false

[node name="Pistol" parent="CharacterArmature/Skeleton3D" index="20"]
visible = false

[node name="Scabbard" parent="CharacterArmature/Skeleton3D" index="21"]
visible = false

[node name="Suit_Body" parent="CharacterArmature/Skeleton3D" index="22"]
visible = false

[node name="Swat_Body" parent="CharacterArmature/Skeleton3D" index="24"]
visible = false

[node name="Swat_Feet" parent="CharacterArmature/Skeleton3D" index="25"]
visible = false

[node name="Swat_Legs" parent="CharacterArmature/Skeleton3D" index="26"]
visible = false

[node name="HandSlot-Left" type="BoneAttachment3D" parent="CharacterArmature/Skeleton3D" index="28"]
transform = Transform3D(-0.2981403, -0.741414, -0.6011801, 0.51383203, -0.6554414, 0.55351, -0.80441827, -0.14388172, 0.5763756, 0.14602406, 1.5137736, 0.31556666)
bone_name = "Middle2.L"
bone_idx = 17

[node name="HandSlot-Right" type="BoneAttachment3D" parent="CharacterArmature/Skeleton3D" index="29"]
transform = Transform3D(0.18987474, 0.87188053, 0.4514113, -0.923821, 0.0029871128, 0.38281253, 0.33241805, -0.4897099, 0.80602825, -0.025304783, 1.3392594, 0.555192)
bone_name = "Middle2.R"
bone_idx = 40

[node name="PunchRaycast" type="RayCast3D" parent="CharacterArmature/Skeleton3D/HandSlot-Right" index="0"]
transform = Transform3D(0.99961865, 0.022347512, -0.016232528, -0.016236791, 9.301164e-06, -0.99986815, -0.022344416, 0.99975026, 0.0003721344, 0, 0, 0)
target_position = Vector3(0, 1, 0)
collision_mask = 7

[node name="AnimationPlayer" parent="." index="1"]
autoplay = "Idle"

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_lnvb7")
anim_player = NodePath("../AnimationPlayer")
parameters/AttackOneShot/active = true
parameters/AttackOneShot/internal_active = true
parameters/AttackOneShot/request = 0
parameters/AimBlend/blend_amount = 0.0
parameters/ExtraOneShot/active = false
parameters/ExtraOneShot/internal_active = false
parameters/ExtraOneShot/request = 0

[node name="AttackTimer" type="Timer" parent="." index="3"]
wait_time = 0.5
one_shot = true
