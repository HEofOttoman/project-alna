[gd_scene load_steps=20 format=3 uid="uid://beqfrqiv61mj7"]

[ext_resource type="Script" uid="uid://dmgbaicuacct4" path="res://resources/player/player_controller.gd" id="1_t6633"]
[ext_resource type="PackedScene" uid="uid://0ntwa17c8s3i" path="res://resources/Characters/main_character/alna_main_character.tscn" id="2_rdg5v"]
[ext_resource type="PackedScene" uid="uid://c4gac8ukjwcmu" path="res://resources/player/camera/camera_controller.tscn" id="3_u8mh4"]
[ext_resource type="Script" uid="uid://c41xrr6rh53v7" path="res://resources/player/entity_resources.gd" id="4_lom5v"]
[ext_resource type="Script" uid="uid://y2thtgrxb5i2" path="res://resources/player/state_machine/player_state_machine/player_state_machine.gd" id="4_rdg5v"]
[ext_resource type="Resource" uid="uid://cxdm8rv47fpqj" path="res://resources/player/player_movement_settings.tres" id="5_7sq0h"]
[ext_resource type="Script" uid="uid://dn6hvnl3cf02f" path="res://resources/player/state_machine/player_state_machine/states/idle.gd" id="5_u8mh4"]
[ext_resource type="Script" uid="uid://r0eck5f7r1ty" path="res://resources/player/state_machine/player_state_machine/states/run.gd" id="6_lrffc"]
[ext_resource type="Script" uid="uid://dgpgxnmhuqxol" path="res://resources/player/state_machine/player_state_machine/states/aim_run.gd" id="7_2veo4"]
[ext_resource type="Script" uid="uid://b77mfrbp326fn" path="res://resources/player/state_machine/player_state_machine/states/jump.gd" id="7_y18je"]
[ext_resource type="Script" uid="uid://c5g1hroewv1o4" path="res://resources/player/state_machine/player_state_machine/states/fall.gd" id="8_h7s5o"]
[ext_resource type="Script" uid="uid://cy8i37oiawryd" path="res://resources/player/state_machine/player_state_machine/states/sprint_fall.gd" id="9_1py4p"]
[ext_resource type="Script" uid="uid://cavg6nynjxtb1" path="res://resources/player/state_machine/player_state_machine/states/sprint.gd" id="9_y18je"]
[ext_resource type="Script" uid="uid://bm0ngmp0gdxbl" path="res://resources/player/state_machine/player_state_machine/states/sprint_jump.gd" id="10_h7s5o"]
[ext_resource type="Script" uid="uid://dvwl4tep6p3d7" path="res://resources/player/state_machine/player_state_machine/states/aim_idle.gd" id="12_4728a"]
[ext_resource type="PackedScene" uid="uid://dxnp2fcahoxx7" path="res://resources/ui_elements/player_ui.tscn" id="16_1bd0g"]
[ext_resource type="Script" uid="uid://ci0e6vtar0vp3" path="res://resources/items/interaction/player_interaction_handler.gd" id="17_5eqpw"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8tjha"]
radius = 0.40478516
height = 1.859375

[sub_resource type="SphereShape3D" id="SphereShape3D_1bd0g"]
radius = 1.148588

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("camera") groups=["Player"]]
collision_layer = 2
collision_mask = 7
script = ExtResource("1_t6633")
camera = NodePath("CameraController")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.94946647, 0)
shape = SubResource("CapsuleShape3D_8tjha")

[node name="alna-Main_Character" parent="." instance=ExtResource("2_rdg5v")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="alna-Main_Character/CharacterArmature" index="0"]
bones/1/position = Vector3(0.00045321946, 0.8358611, -0.04560568)
bones/5/rotation = Quaternion(-0.007489846, 7.8924785e-07, 5.1550687e-05, 0.99997205)
bones/7/rotation = Quaternion(-0.001217906, -0.0002754752, 5.977797e-06, 0.9999992)
bones/9/rotation = Quaternion(-0.6643092, 0.4098758, 0.38247305, 0.49437803)
bones/10/rotation = Quaternion(-0.12479881, -0.029031798, -0.18313566, 0.9747019)
bones/13/rotation = Quaternion(-0.020556776, -0.029596012, 0.067963235, 0.9970369)
bones/14/rotation = Quaternion(-0.06262524, 0.012150408, 0.025575034, 0.9976355)
bones/17/rotation = Quaternion(-0.08997468, 0.0254326, -0.0061530606, 0.9956003)
bones/18/rotation = Quaternion(-0.120410115, 0.006238904, -0.018847365, 0.9925257)
bones/21/rotation = Quaternion(-0.08193289, 0.16051692, -0.03655421, 0.9829472)
bones/22/rotation = Quaternion(-0.11816418, 0.0402264, -0.041462984, 0.99131227)
bones/29/rotation = Quaternion(-0.008800031, -0.13660143, 0.08418875, 0.9870031)
bones/30/rotation = Quaternion(-0.14379413, -0.053167377, 0.15373218, 0.97614706)
bones/32/rotation = Quaternion(-0.61537224, -0.312896, -0.4312567, 0.5808879)
bones/33/rotation = Quaternion(-0.21323855, -0.19257861, 0.3228663, 0.9017761)
bones/52/rotation = Quaternion(0.0044209445, 0.13775152, -0.08512291, 0.9867924)
bones/53/rotation = Quaternion(-0.21409023, 0.05776056, -0.13615505, 0.9655522)
bones/54/rotation = Quaternion(0.53617126, -0.013023757, -0.8372762, 0.10639293)
bones/55/rotation = Quaternion(0.16672619, 0.6871701, -0.16672607, 0.6871697)
bones/56/rotation = Quaternion(0.5571887, 0.115100205, 0.8078235, 0.15399326)
bones/57/rotation = Quaternion(0.14481016, -0.69212025, 0.14481004, 0.6921198)

[node name="UpperLeg_L" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="0"]
transform = Transform3D(-0.76752603, 0.2081928, -0.6063072, -0.19212568, -0.9770216, -0.09228741, -0.61154187, 0.04565105, 0.78994954, 0.11567718, 0.93461037, -0.011975773)

[node name="HandSlot-Left" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="28"]
transform = Transform3D(-0.053093538, 0.036580265, 0.9979192, -0.021749191, -0.99913394, 0.03546782, 0.99835235, -0.019820768, 0.05384319, 0.29330465, 0.8714793, 0.03415303)

[node name="HandSlot-Right" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="29"]
transform = Transform3D(-0.3544239, 0.06470409, -0.9328434, -0.14187728, -0.98977435, -0.014747933, -0.92425835, 0.12712204, 0.35997963, -0.23819321, 0.89207935, 0.1882399)

[node name="PunchRaycast" parent="alna-Main_Character/CharacterArmature/Skeleton3D/HandSlot-Right" index="0"]
visible = false

[node name="CameraController" parent="." instance=ExtResource("3_u8mh4")]
transform = Transform3D(1, 0, 0, 0, 0.99999994, 0, 0, 0, 0.99999994, 0, 1.3296388, 0)

[node name="Camera3D" parent="CameraController/EdgeSpringArm/RearSpringArm" index="0"]
transform = Transform3D(1, 0, 0, 0, 1.0000001, 0, 0, 0, 1.0000001, 0, -0.0014749765, 0.607096)

[node name="Resources" type="Node" parent="."]
script = ExtResource("4_lom5v")

[node name="PlayerStateMachine" type="Node" parent="." node_paths=PackedStringArray("character_skin", "starting_state")]
script = ExtResource("4_rdg5v")
player_movement_settings = ExtResource("5_7sq0h")
character_skin = NodePath("../alna-Main_Character")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="PlayerStateMachine"]
script = ExtResource("5_u8mh4")

[node name="Run" type="Node" parent="PlayerStateMachine"]
script = ExtResource("6_lrffc")

[node name="AimRun" type="Node" parent="PlayerStateMachine"]
script = ExtResource("7_2veo4")

[node name="Jump" type="Node" parent="PlayerStateMachine"]
script = ExtResource("7_y18je")

[node name="Fall" type="Node" parent="PlayerStateMachine"]
script = ExtResource("8_h7s5o")

[node name="SprintFall" type="Node" parent="PlayerStateMachine"]
script = ExtResource("9_1py4p")

[node name="Sprint" type="Node" parent="PlayerStateMachine"]
script = ExtResource("9_y18je")

[node name="SprintJump" type="Node" parent="PlayerStateMachine"]
script = ExtResource("10_h7s5o")

[node name="AimIdle" type="Node" parent="PlayerStateMachine"]
script = ExtResource("12_4728a")

[node name="HUD" parent="." instance=ExtResource("16_1bd0g")]

[node name="Reticle" parent="HUD" index="4"]
visible = false

[node name="InteractionArea" type="Area3D" parent="." node_paths=PackedStringArray("indicator_prompt")]
script = ExtResource("17_5eqpw")
indicator_prompt = NodePath("InteractionPrompt")

[node name="CollisionShape3D" type="CollisionShape3D" parent="InteractionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("SphereShape3D_1bd0g")

[node name="InteractionPrompt" type="Label" parent="InteractionArea"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -640.0
offset_top = -33.0
offset_right = 640.0
offset_bottom = 33.0
grow_horizontal = 2
grow_vertical = 2
horizontal_alignment = 1
vertical_alignment = 1

[connection signal="health_changed" from="Resources" to="HUD/HealthLabel" method="on_health_changed"]
[connection signal="aim_entered" from="PlayerStateMachine/AimRun" to="CameraController" method="_on_aim_entered"]
[connection signal="aim_released" from="PlayerStateMachine/AimRun" to="CameraController" method="_on_aim_released"]
[connection signal="sprint_ended" from="PlayerStateMachine/SprintFall" to="CameraController" method="_on_sprint_ended"]
[connection signal="sprint_ended" from="PlayerStateMachine/Sprint" to="CameraController" method="_on_sprint_ended"]
[connection signal="sprint_started" from="PlayerStateMachine/Sprint" to="CameraController" method="_on_sprint_sprint_started"]
[connection signal="sprint_ended" from="PlayerStateMachine/SprintJump" to="CameraController" method="_on_sprint_ended"]
[connection signal="aim_entered" from="PlayerStateMachine/AimIdle" to="CameraController" method="_on_aim_entered"]
[connection signal="aim_released" from="PlayerStateMachine/AimIdle" to="CameraController" method="_on_aim_released"]
[connection signal="body_entered" from="InteractionArea" to="InteractionArea" method="_on_object_entered_area"]
[connection signal="body_exited" from="InteractionArea" to="InteractionArea" method="_on_object_exited_area"]

[editable path="alna-Main_Character"]
[editable path="CameraController"]
[editable path="HUD"]
