[gd_scene load_steps=22 format=3 uid="uid://beqfrqiv61mj7"]

[ext_resource type="Script" uid="uid://dmgbaicuacct4" path="res://resources/player/player_controller.gd" id="1_t6633"]
[ext_resource type="PackedScene" uid="uid://0ntwa17c8s3i" path="res://resources/Characters/main_character/alna_main_character.tscn" id="2_rdg5v"]
[ext_resource type="PackedScene" uid="uid://c4gac8ukjwcmu" path="res://resources/player/camera/camera_controller.tscn" id="3_u8mh4"]
[ext_resource type="Script" uid="uid://c41xrr6rh53v7" path="res://resources/player/entity_resources.gd" id="4_lom5v"]
[ext_resource type="Script" uid="uid://y2thtgrxb5i2" path="res://resources/player/state_machine/player_state_machine/player_state_machine.gd" id="4_rdg5v"]
[ext_resource type="Resource" uid="uid://cxdm8rv47fpqj" path="res://resources/player/player_movement_settings.tres" id="5_7sq0h"]
[ext_resource type="Script" uid="uid://dn6hvnl3cf02f" path="res://resources/player/state_machine/player_state_machine/states/idle.gd" id="5_u8mh4"]
[ext_resource type="Script" uid="uid://r0eck5f7r1ty" path="res://resources/player/state_machine/player_state_machine/states/run.gd" id="6_lrffc"]
[ext_resource type="Script" uid="uid://dgpgxnmhuqxol" path="res://resources/player/state_machine/player_state_machine/states/aim_run.gd" id="7_2veo4"]
[ext_resource type="Script" uid="uid://b77mfrbp326fn" path="res://resources/player/state_machine/player_state_machine/states/jump.gd" id="7_y18je"]
[ext_resource type="Script" uid="uid://c5g1hroewv1o4" path="res://resources/player/state_machine/player_state_machine/states/fall.gd" id="8_h7s5o"]
[ext_resource type="Script" uid="uid://cy8i37oiawryd" path="res://resources/player/state_machine/player_state_machine/states/sprint_fall.gd" id="9_1py4p"]
[ext_resource type="Script" uid="uid://cavg6nynjxtb1" path="res://resources/player/state_machine/player_state_machine/states/sprint.gd" id="9_y18je"]
[ext_resource type="Script" uid="uid://bm0ngmp0gdxbl" path="res://resources/player/state_machine/player_state_machine/states/sprint_jump.gd" id="10_h7s5o"]
[ext_resource type="Script" uid="uid://dvwl4tep6p3d7" path="res://resources/player/state_machine/player_state_machine/states/aim_idle.gd" id="12_4728a"]
[ext_resource type="PackedScene" uid="uid://dxnp2fcahoxx7" path="res://resources/ui_elements/player_ui.tscn" id="16_1bd0g"]
[ext_resource type="Script" uid="uid://ci0e6vtar0vp3" path="res://resources/items/player_interaction_handler.gd" id="17_5eqpw"]
[ext_resource type="Script" uid="uid://8xdlvnyv386a" path="res://resources/items/item_data.gd" id="18_7aa3e"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8tjha"]
radius = 0.40478516
height = 1.859375

[sub_resource type="Resource" id="Resource_xeje5"]
script = ExtResource("18_7aa3e")
item_name = &"TestCube"
metadata/_custom_type_script = "uid://8xdlvnyv386a"

[sub_resource type="SphereShape3D" id="SphereShape3D_1bd0g"]
radius = 1.148588

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("camera") groups=["Player"]]
collision_layer = 2
collision_mask = 7
script = ExtResource("1_t6633")
camera = NodePath("CameraController")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.94946647, 0)
shape = SubResource("CapsuleShape3D_8tjha")

[node name="alna-Main_Character" parent="." instance=ExtResource("2_rdg5v")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="alna-Main_Character/CharacterArmature" index="0"]
bones/1/position = Vector3(0.00045321946, 0.83125263, -0.04560568)
bones/1/rotation = Quaternion(0, 0.2355304, 0, 0.971867)
bones/3/rotation = Quaternion(0.047781564, 4.3005366e-07, 2.844035e-08, 0.9988578)
bones/4/rotation = Quaternion(0.085464716, -0.23748346, 0.011578163, 0.9675554)
bones/5/rotation = Quaternion(-6.180583e-05, 2.6231257e-07, 1.7133854e-05, 1)
bones/6/rotation = Quaternion(-0.009471056, 6.7769327e-07, -7.891064e-10, 0.99995524)
bones/7/rotation = Quaternion(-0.016782394, -0.00027543632, 8.23702e-05, 0.99985915)
bones/8/position = Vector3(0.098735474, 0.02901768, 0.021275692)
bones/8/rotation = Quaternion(0.45619938, 0.8402314, 0.10690721, -0.27288124)
bones/9/rotation = Quaternion(-0.67181414, 0.40679404, 0.38390672, 0.48559248)
bones/10/rotation = Quaternion(-0.12212505, -0.029494196, -0.18308233, 0.9750367)
bones/11/rotation = Quaternion(0.01112174, 0.017761618, 0.012660684, 0.9997003)
bones/13/rotation = Quaternion(-0.040890913, -0.03214561, 0.06704348, 0.9963934)
bones/14/rotation = Quaternion(-0.079073526, 0.0116556445, 0.025053112, 0.99648577)
bones/15/rotation = Quaternion(-0.029872274, 0.009780755, 0.004962218, 0.99949354)
bones/17/rotation = Quaternion(-0.08997468, 0.0254326, -0.0061530606, 0.9956003)
bones/18/rotation = Quaternion(-0.12041012, 0.006238902, -0.018847365, 0.9925257)
bones/19/rotation = Quaternion(-0.019045558, 0.009171959, -0.011120888, 0.9997148)
bones/21/rotation = Quaternion(-0.08193289, 0.16051693, -0.03655421, 0.98294723)
bones/22/rotation = Quaternion(-0.11816418, 0.0402264, -0.041462984, 0.99131227)
bones/23/rotation = Quaternion(-0.07517977, 0.03008514, -0.0074802376, 0.99668807)
bones/25/rotation = Quaternion(-0.12658873, 0.1795841, -0.16197222, 0.96202385)
bones/26/rotation = Quaternion(-0.090797596, -0.05660937, -0.023062492, 0.9939917)
bones/27/rotation = Quaternion(-0.11694975, -0.018361047, -0.0028989268, 0.99296385)
bones/28/rotation = Quaternion(0.003877143, 0.19860779, -0.3457619, 0.9170543)
bones/29/rotation = Quaternion(0.027596893, -0.12613153, 0.08492746, 0.9879862)
bones/30/rotation = Quaternion(-0.10407473, -0.054944705, 0.13092622, 0.98438203)
bones/31/position = Vector3(-0.098059915, 0.029017754, 0.021275876)
bones/31/rotation = Quaternion(-0.45619926, 0.8402316, 0.10690752, 0.27288073)
bones/32/rotation = Quaternion(-0.62430453, -0.30992207, -0.43483007, 0.57018864)
bones/33/rotation = Quaternion(-0.20785254, -0.19331916, 0.3227826, 0.9029045)
bones/34/rotation = Quaternion(0.010415779, -0.021232212, -0.041501597, 0.9988585)
bones/35/rotation = Quaternion(-0.00885779, -0.014218245, 0.09331991, 0.99549526)
bones/36/rotation = Quaternion(-0.052857153, 0.03364067, -0.066488676, 0.9958181)
bones/37/rotation = Quaternion(-0.08878331, -0.011361796, -0.024741486, 0.9956789)
bones/38/rotation = Quaternion(-0.029872274, -0.009780765, -0.004962211, 0.99949354)
bones/39/rotation = Quaternion(0.02572272, 0.019408824, -0.016910495, 0.9993376)
bones/40/rotation = Quaternion(-0.1043932, -0.026901936, -0.069011636, 0.9917741)
bones/41/rotation = Quaternion(-0.120410144, -0.006238879, 0.018847367, 0.99252576)
bones/42/rotation = Quaternion(-0.019045575, -0.009171943, 0.011120894, 0.99971473)
bones/43/rotation = Quaternion(0.009113169, 0.05034088, -0.12795717, 0.99045944)
bones/44/rotation = Quaternion(-0.081932895, -0.1605169, 0.036554217, 0.9829472)
bones/45/rotation = Quaternion(-0.11816421, -0.04022643, 0.041462973, 0.9913122)
bones/46/rotation = Quaternion(-0.07517976, -0.030085137, 0.0074802316, 0.99668807)
bones/47/rotation = Quaternion(0.017032549, 0.07191994, -0.22635871, 0.971236)
bones/48/rotation = Quaternion(-0.12658867, -0.17958407, 0.16197225, 0.9620238)
bones/49/rotation = Quaternion(-0.090797596, 0.05660938, 0.02306245, 0.9939917)
bones/50/rotation = Quaternion(-0.1169498, 0.018361019, 0.0028989257, 0.9929639)
bones/51/rotation = Quaternion(0.019557796, -0.18572316, 0.43515944, 0.8807728)
bones/52/rotation = Quaternion(0.0226997, 0.13006975, -0.08516915, 0.98757935)
bones/53/rotation = Quaternion(-0.13930522, 0.05658182, -0.12793729, 0.98031867)
bones/54/rotation = Quaternion(0.53580844, -0.018512426, -0.8362018, 0.11546903)
bones/54/scale = Vector3(0.99999595, 0.99999964, 1.0000728)
bones/55/rotation = Quaternion(0.18038666, 0.6837111, -0.18038656, 0.6837107)
bones/56/rotation = Quaternion(0.55570537, 0.12216317, 0.8058016, 0.16416936)
bones/56/scale = Vector3(0.99999726, 0.9999996, 1.0000701)
bones/57/rotation = Quaternion(0.16037753, -0.6886795, 0.16037743, 0.68867904)
bones/58/position = Vector3(0.12059154, 0.022751734, -0.18702765)
bones/58/rotation = Quaternion(0.61441374, 0.3480438, -0.34615317, 0.6176887)
bones/59/position = Vector3(0.5682192, 0.62651205, 0.22707659)
bones/60/position = Vector3(-0.06850713, 0.02275173, 0.17368552)
bones/60/rotation = Quaternion(0.70403296, 0.040968817, -0.040789712, 0.7078102)
bones/61/position = Vector3(-0.018165782, 0.42326432, 0.65894055)

[node name="UpperLeg_L" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="0"]
transform = Transform3D(-0.76314336, 0.22487053, -0.6058831, -0.21294822, -0.97264814, -0.09278508, -0.6101289, 0.058209375, 0.79021657, 0.11567718, 0.9300019, -0.011975773)

[node name="HandSlot-Left" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="28"]
transform = Transform3D(-0.053508908, 0.017975733, 0.9984055, -0.03597796, -0.9992236, 0.0160622, 0.9979188, -0.03506106, 0.054114345, 0.28236425, 0.86460525, 0.026839126)

[node name="HandSlot-Right" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="29"]
transform = Transform3D(-0.351811, 0.08278982, -0.9324027, -0.134693, -0.9901927, -0.037098885, -0.9263294, 0.11253605, 0.3595116, -0.22687289, 0.88327205, 0.18154486)

[node name="CameraController" parent="." instance=ExtResource("3_u8mh4")]
transform = Transform3D(1, 0, 0, 0, 0.99999994, 0, 0, 0, 0.99999994, 0, 1.3296388, 0)

[node name="Camera3D" parent="CameraController/EdgeSpringArm/RearSpringArm" index="0"]
transform = Transform3D(1, 0, 0, 0, 1.0000001, 0, 0, 0, 1.0000001, 0, -0.0014749765, 0.607096)

[node name="Resources" type="Node" parent="."]
script = ExtResource("4_lom5v")

[node name="PlayerStateMachine" type="Node" parent="." node_paths=PackedStringArray("character_skin", "starting_state")]
script = ExtResource("4_rdg5v")
player_movement_settings = ExtResource("5_7sq0h")
character_skin = NodePath("../alna-Main_Character")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="PlayerStateMachine"]
script = ExtResource("5_u8mh4")

[node name="Run" type="Node" parent="PlayerStateMachine"]
script = ExtResource("6_lrffc")

[node name="AimRun" type="Node" parent="PlayerStateMachine"]
script = ExtResource("7_2veo4")

[node name="Jump" type="Node" parent="PlayerStateMachine"]
script = ExtResource("7_y18je")

[node name="Fall" type="Node" parent="PlayerStateMachine"]
script = ExtResource("8_h7s5o")

[node name="SprintFall" type="Node" parent="PlayerStateMachine"]
script = ExtResource("9_1py4p")

[node name="Sprint" type="Node" parent="PlayerStateMachine"]
script = ExtResource("9_y18je")

[node name="SprintJump" type="Node" parent="PlayerStateMachine"]
script = ExtResource("10_h7s5o")

[node name="AimIdle" type="Node" parent="PlayerStateMachine"]
script = ExtResource("12_4728a")

[node name="HUD" parent="." instance=ExtResource("16_1bd0g")]

[node name="InteractionArea" type="Area3D" parent="."]
script = ExtResource("17_5eqpw")
item_types = Array[ExtResource("18_7aa3e")]([SubResource("Resource_xeje5")])

[node name="CollisionShape3D" type="CollisionShape3D" parent="InteractionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("SphereShape3D_1bd0g")

[connection signal="health_changed" from="Resources" to="HUD/HealthLabel" method="on_health_changed"]
[connection signal="aim_entered" from="PlayerStateMachine/AimRun" to="CameraController" method="_on_aim_entered"]
[connection signal="aim_released" from="PlayerStateMachine/AimRun" to="CameraController" method="_on_aim_released"]
[connection signal="sprint_ended" from="PlayerStateMachine/SprintFall" to="CameraController" method="_on_sprint_ended"]
[connection signal="sprint_ended" from="PlayerStateMachine/Sprint" to="CameraController" method="_on_sprint_ended"]
[connection signal="sprint_started" from="PlayerStateMachine/Sprint" to="CameraController" method="_on_sprint_sprint_started"]
[connection signal="sprint_ended" from="PlayerStateMachine/SprintJump" to="CameraController" method="_on_sprint_ended"]
[connection signal="aim_entered" from="PlayerStateMachine/AimIdle" to="CameraController" method="_on_aim_entered"]
[connection signal="aim_released" from="PlayerStateMachine/AimIdle" to="CameraController" method="_on_aim_released"]
[connection signal="body_entered" from="InteractionArea" to="InteractionArea" method="_on_object_entered_area"]
[connection signal="body_exited" from="InteractionArea" to="InteractionArea" method="_on_object_exited_area"]

[editable path="alna-Main_Character"]
[editable path="CameraController"]
[editable path="HUD"]
