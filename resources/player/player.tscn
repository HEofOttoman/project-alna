[gd_scene load_steps=20 format=3 uid="uid://beqfrqiv61mj7"]

[ext_resource type="Script" uid="uid://dmgbaicuacct4" path="res://resources/player/player_controller.gd" id="1_t6633"]
[ext_resource type="PackedScene" uid="uid://0ntwa17c8s3i" path="res://resources/Characters/main_character/alna_main_character.tscn" id="2_rdg5v"]
[ext_resource type="PackedScene" uid="uid://c4gac8ukjwcmu" path="res://resources/player/camera/camera_controller.tscn" id="3_u8mh4"]
[ext_resource type="Script" uid="uid://c41xrr6rh53v7" path="res://resources/player/entity_resources.gd" id="4_lom5v"]
[ext_resource type="Script" uid="uid://y2thtgrxb5i2" path="res://resources/player/state_machine/player_state_machine/player_state_machine.gd" id="4_rdg5v"]
[ext_resource type="Resource" uid="uid://cxdm8rv47fpqj" path="res://resources/player/player_movement_settings.tres" id="5_7sq0h"]
[ext_resource type="Script" uid="uid://dn6hvnl3cf02f" path="res://resources/player/state_machine/player_state_machine/states/idle.gd" id="5_u8mh4"]
[ext_resource type="Script" uid="uid://r0eck5f7r1ty" path="res://resources/player/state_machine/player_state_machine/states/run.gd" id="6_lrffc"]
[ext_resource type="Script" uid="uid://dgpgxnmhuqxol" path="res://resources/player/state_machine/player_state_machine/states/aim_run.gd" id="7_2veo4"]
[ext_resource type="Script" uid="uid://b77mfrbp326fn" path="res://resources/player/state_machine/player_state_machine/states/jump.gd" id="7_y18je"]
[ext_resource type="Script" uid="uid://c5g1hroewv1o4" path="res://resources/player/state_machine/player_state_machine/states/fall.gd" id="8_h7s5o"]
[ext_resource type="Script" uid="uid://cy8i37oiawryd" path="res://resources/player/state_machine/player_state_machine/states/sprint_fall.gd" id="9_1py4p"]
[ext_resource type="Script" uid="uid://cavg6nynjxtb1" path="res://resources/player/state_machine/player_state_machine/states/sprint.gd" id="9_y18je"]
[ext_resource type="Script" uid="uid://bm0ngmp0gdxbl" path="res://resources/player/state_machine/player_state_machine/states/sprint_jump.gd" id="10_h7s5o"]
[ext_resource type="Script" uid="uid://dvwl4tep6p3d7" path="res://resources/player/state_machine/player_state_machine/states/aim_idle.gd" id="12_4728a"]
[ext_resource type="PackedScene" uid="uid://dxnp2fcahoxx7" path="res://resources/ui_elements/player_ui.tscn" id="16_1bd0g"]
[ext_resource type="Script" uid="uid://ci0e6vtar0vp3" path="res://resources/items/interaction/player_interaction_handler.gd" id="17_5eqpw"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8tjha"]
radius = 0.40478516
height = 1.859375

[sub_resource type="SphereShape3D" id="SphereShape3D_1bd0g"]
radius = 1.148588

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("camera") groups=["Player"]]
collision_layer = 2
collision_mask = 7
script = ExtResource("1_t6633")
camera = NodePath("CameraController")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.94946647, 0)
shape = SubResource("CapsuleShape3D_8tjha")

[node name="alna-Main_Character" parent="." instance=ExtResource("2_rdg5v")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="alna-Main_Character/CharacterArmature" index="0"]
bones/1/position = Vector3(0.00045321946, 0.8367645, -0.04560568)
bones/5/rotation = Quaternion(-0.008850535, 8.8570874e-07, 5.7855188e-05, 0.9999609)
bones/7/rotation = Quaternion(0.0016731046, -0.00027547483, -8.21168e-06, 0.99999857)
bones/9/rotation = Quaternion(-0.6644675, 0.40981182, 0.38250363, 0.49419454)
bones/10/rotation = Quaternion(-0.12584242, -0.028851207, -0.18315612, 0.97456926)
bones/13/rotation = Quaternion(-0.029822646, -0.030759217, 0.067547716, 0.9967958)
bones/14/rotation = Quaternion(-0.071529455, 0.011883048, 0.025293434, 0.997047)
bones/17/rotation = Quaternion(-0.08997468, 0.0254326, -0.0061530606, 0.9956003)
bones/18/rotation = Quaternion(-0.120410115, 0.006238904, -0.018847365, 0.9925257)
bones/21/rotation = Quaternion(-0.08193288, 0.16051693, -0.036554214, 0.98294723)
bones/22/rotation = Quaternion(-0.11816418, 0.0402264, -0.041462984, 0.99131227)
bones/29/rotation = Quaternion(-0.023440916, -0.1407587, 0.08385742, 0.98620766)
bones/30/rotation = Quaternion(-0.15968755, -0.052419737, 0.16281424, 0.97223634)
bones/32/rotation = Quaternion(-0.61340785, -0.31353527, -0.43046552, 0.58320314)
bones/33/rotation = Quaternion(-0.21565549, -0.19224429, 0.32290083, 0.90126026)
bones/52/rotation = Quaternion(0.006143491, 0.13702998, -0.0851287, 0.9868831)
bones/53/rotation = Quaternion(-0.21669514, 0.0577958, -0.13642925, 0.96493006)
bones/54/rotation = Quaternion(0.53624105, -0.011813516, -0.83750045, 0.104397945)
bones/55/rotation = Quaternion(0.16358362, 0.68792504, -0.16358353, 0.68792456)
bones/56/rotation = Quaternion(0.5575234, 0.11344411, 0.8082782, 0.15160635)
bones/57/rotation = Quaternion(0.14123543, -0.6928586, 0.14123529, 0.6928581)

[node name="UpperLeg_L" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="0"]
transform = Transform3D(-0.76844347, 0.20451863, -0.6063953, -0.18753567, -0.97792256, -0.092183985, -0.61181426, 0.042879596, 0.789894, 0.11567718, 0.9355138, -0.011975773)

[node name="HandSlot-Left" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="28"]
transform = Transform3D(-0.053186268, 0.033943504, 0.99800754, -0.018945456, -0.9992765, 0.03297715, 0.9984046, -0.017153839, 0.053791102, 0.29223517, 0.8720954, 0.03542675)

[node name="HandSlot-Right" parent="alna-Main_Character/CharacterArmature/Skeleton3D" index="29"]
transform = Transform3D(-0.3546471, 0.06330532, -0.9328546, -0.1438859, -0.98951596, -0.01244849, -0.9238621, 0.12980951, 0.36003748, -0.23974371, 0.89386314, 0.1894598)

[node name="PunchRaycast" parent="alna-Main_Character/CharacterArmature/Skeleton3D/HandSlot-Right" index="0"]
visible = false

[node name="CameraController" parent="." instance=ExtResource("3_u8mh4")]
transform = Transform3D(1, 0, 0, 0, 0.99999994, 0, 0, 0, 0.99999994, 0, 1.3296388, 0)

[node name="Camera3D" parent="CameraController/EdgeSpringArm/RearSpringArm" index="0"]
transform = Transform3D(1, 0, 0, 0, 1.0000001, 0, 0, 0, 1.0000001, 0, -0.0014749765, 0.607096)

[node name="Resources" type="Node" parent="."]
script = ExtResource("4_lom5v")

[node name="PlayerStateMachine" type="Node" parent="." node_paths=PackedStringArray("character_skin", "starting_state")]
script = ExtResource("4_rdg5v")
player_movement_settings = ExtResource("5_7sq0h")
character_skin = NodePath("../alna-Main_Character")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="PlayerStateMachine"]
script = ExtResource("5_u8mh4")

[node name="Run" type="Node" parent="PlayerStateMachine"]
script = ExtResource("6_lrffc")

[node name="AimRun" type="Node" parent="PlayerStateMachine"]
script = ExtResource("7_2veo4")

[node name="Jump" type="Node" parent="PlayerStateMachine"]
script = ExtResource("7_y18je")

[node name="Fall" type="Node" parent="PlayerStateMachine"]
script = ExtResource("8_h7s5o")

[node name="SprintFall" type="Node" parent="PlayerStateMachine"]
script = ExtResource("9_1py4p")

[node name="Sprint" type="Node" parent="PlayerStateMachine"]
script = ExtResource("9_y18je")

[node name="SprintJump" type="Node" parent="PlayerStateMachine"]
script = ExtResource("10_h7s5o")

[node name="AimIdle" type="Node" parent="PlayerStateMachine"]
script = ExtResource("12_4728a")

[node name="HUD" parent="." instance=ExtResource("16_1bd0g")]

[node name="Reticle" parent="HUD" index="4"]
visible = false

[node name="InteractionArea" type="Area3D" parent="." node_paths=PackedStringArray("indicator_prompt")]
script = ExtResource("17_5eqpw")
indicator_prompt = NodePath("InteractionPrompt")

[node name="CollisionShape3D" type="CollisionShape3D" parent="InteractionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("SphereShape3D_1bd0g")

[node name="InteractionPrompt" type="Label" parent="InteractionArea"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -640.0
offset_top = -33.0
offset_right = 640.0
offset_bottom = 33.0
grow_horizontal = 2
grow_vertical = 2
text = "[E] Interact"
horizontal_alignment = 1
vertical_alignment = 1

[connection signal="health_changed" from="Resources" to="HUD/HealthLabel" method="on_health_changed"]
[connection signal="aim_entered" from="PlayerStateMachine/AimRun" to="CameraController" method="_on_aim_entered"]
[connection signal="aim_released" from="PlayerStateMachine/AimRun" to="CameraController" method="_on_aim_released"]
[connection signal="sprint_ended" from="PlayerStateMachine/SprintFall" to="CameraController" method="_on_sprint_ended"]
[connection signal="sprint_ended" from="PlayerStateMachine/Sprint" to="CameraController" method="_on_sprint_ended"]
[connection signal="sprint_started" from="PlayerStateMachine/Sprint" to="CameraController" method="_on_sprint_sprint_started"]
[connection signal="sprint_ended" from="PlayerStateMachine/SprintJump" to="CameraController" method="_on_sprint_ended"]
[connection signal="aim_entered" from="PlayerStateMachine/AimIdle" to="CameraController" method="_on_aim_entered"]
[connection signal="aim_released" from="PlayerStateMachine/AimIdle" to="CameraController" method="_on_aim_released"]
[connection signal="body_entered" from="InteractionArea" to="InteractionArea" method="_on_object_entered_area"]
[connection signal="body_exited" from="InteractionArea" to="InteractionArea" method="_on_object_exited_area"]

[editable path="alna-Main_Character"]
[editable path="CameraController"]
[editable path="HUD"]
